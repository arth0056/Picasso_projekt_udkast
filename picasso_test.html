<!DOCTYPE html>
<html lang="da">

<head>


    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="">
    <link href="https://fonts.googleapis.com/css?family=La+Belle+Aurore|Lato&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Lato', sans-serif;
            overflow-x: hidden;
            /*            margin: 0;*/
        }

        main_wrapper {
            margin: 1rem;
        }

        header {
            display: flex;
            align-items: center;
        }


        img {
            width: 100%;
            justify-content: center;
            object-fit: cover;
            height: 255px;
        }

        h1 {
            text-align: center;
            margin: 4px;
        }

        p {
            margin: 1rem;
        }


        /*        style til listeview*/


        #logo {
            background-image: url(logo/logo.png);
            background-size: contain;
            height: 10rem;
            width: 10rem;

        }

        .logo_container {
            display: flex;
            max-width: 1000px;
            justify-content: flex-start;
            margin: 0 auto;
        }

        nav {
            margin: 0 auto;
            text-align: right;

        }

        .valgt {
            background-color: rgba(155, 0, 0, 0.65);

        }

        button {
            font-family: 'La Belle Aurore';
            font-weight: 666;
            font-size: 1.4rem;
            margin: 7px;
            border-radius: 7%;
            border-style: hidden;
            background-color: transparent;
        }

        .data-container {

            /*            display: flex;*/


            display: grid;

            grid-template-columns: repeat(2, 1fr);
            grid-auto-flow: dense;

            grid-gap: 40px;

            margin: 0 auto;
            margin-top: 4vw;
            max-width: 1000px;
        }



        .tik {}

        footer {
            position: relative;
            background-color: indianred;
            bottom: -.5rem;
            left: -.5rem;
            height: 24vh;
            width: 100vw;
            margin: 0;
            margin-top: 4rem;

        }




        @media only screen and (max-width: 400px) {

            .data-container article:nth-child(2n + 2) {
                margin-top: 7vw;
                /*                border: solid indianred 2px;*/
            }

            img {
                height: 174px;
            }

            header {
                align-items: flex-start;
            }

        }


        @media only screen and (min-width: 400px) {

            img {
                height: 147px;
                object-position: 50% 0%;
            }

            .data-container {

                grid-template-columns: repeat(3, 1fr);
            }

            .data-container article:nth-child(3n + 2) {
                margin-top: 4vw;
                /*                border: solid orangered 2px;*/
            }


        }


        @media only screen and (min-width: 800px) {


            img {
                height: 255px;
            }



            .data-container article:nth-child(3n + 2) {
                margin-top: 0vw;
                /*                border: solid yellow 2px;*/
            }

            .data-container {

                grid-template-columns: repeat(4, 1fr);
            }

            .data-container article:nth-child(4n + 2) {
                /*                border: solid darkred 2px;*/
                margin-top: 4vw;
            }

            .data-container article:nth-child(4n + 4) {
                /*                border: solid darkred 2px;*/
                margin-top: 4vw;
            }



        }

    </style>
</head>

<body>

    <div id="main_wrapper">

        <header>

            <div class="logo_container">
                <div id="logo">
                </div>
            </div>

            <h1></h1>
            <nav>
                <button class="filter valgt" data-mus="alle">Alle</button>
                <button class="filter" data-mus="olga">Olga Khokhlova</button>
                <button class="filter" data-mus="jacqueline">Jacqueline Roque</button>
                <button class="filter" data-mus="doramaar">Dora Maar</button>
                <button class="filter" data-mus="francoise">Francoise Gilot</button>
                <button class="filter" data-mus="marietherese">Marie-Therese</button>

            </nav>

        </header>


        <div id="outer_container">
            <section class="data-container"> </section>
        </div>

        <template>
            <article class="tik">
                <img src="" alt="">
            </article>

        </template>

    </div>

    <footer>

        <p id="footer_txt">

        </p>


    </footer>



    <script>
        let personer = [];
        const googleData = "https://spreadsheets.google.com/feeds/list/13kjSiYnNHiUNoKXbuB1oO7nbL1k3Zawd7irhZpyQuBQ/od6/public/values?alt=json";
        let filter = "alle";
        document.addEventListener("DOMContentLoaded", startUp);
        const detalje = document.querySelector("#pop_up");
        //        const container = document.querySelector(".data-container");
        // const imgTemplate = document.querySelector("template");
        //
        // let klon = imgTemplate.cloneNode(true).content;






        //        starter henter googledata  og sætter eventlistenere på buttons


        function startUp() {
            hentData();
            knapper();


        }



        //            henter data fra google sheet, venter på respons før den går til visTing();

        async function hentData() {

            const response = await fetch(googleData);
            console.log(response);
            personer = await response.json();
            console.log(personer);
            visTing();

        }


        //        tilføjer eventlistener til knapper en ad gangen

        function knapper() {
            document.querySelectorAll(".filter").forEach(elm_knap1 => {
                elm_knap1.addEventListener("click", filtering);
            })
        }







        function filtering() {

            //            sætter "filter" variablen til den trykkede knaps data-* "value"

            filter = this.dataset.mus;

            //            fjerner ".valgt" style fra forrige knap

            document.querySelectorAll(".filter").forEach(elm => {
                elm.classList.remove("valgt");
            })

            //            tilføjer ".valgt" style til den trykkede knap

            this.classList.add("valgt");

            //            kalder visTing() funktionen og printer den trykkede knaps navn i h1

            visTing();

            //            document.querySelector("h1").textContent = this.textContent;
        }



        function visTing() {
            console.log("VIS ting");

            const container = document.querySelector(".data-container");
            const imgTemplate = document.querySelector("template");


            container.innerHTML = "";

            personer.feed.entry.forEach(ting => {

                //               mener der skal stå -> if (filter == "alle" || filter == ting.gsx$navn.$t) <- for at filtrere efter spreadsheet kategorien navn

                if (filter == "alle" || filter == ting.gsx$kategori.$t) {

                    console.log("hej");
                    let klon = imgTemplate.cloneNode(true).content;
                    klon.querySelector("img").src = "/imgs/" + ting.gsx$billede.$t + ".JPG";
                    klon.querySelector(".tik").addEventListener("click", () => {
                        console.log("hva fuck er der nu galt")
                        location.href = "picasso_test_detail.html?id=" + ting.gsx$id.$t;
                    })

                    container.appendChild(klon);
                }
            })

        }

        function visPopUp(ting) {
            console.log("fuccckk")
            klon.querySelector(".tik").addEventListener("click", () => {
                console.log("hva fuck er der nu galt")
                location.href = "picasso_test_detail.html?id=" + ting.gsx$id.$t;
            })
        }

    </script>
</body>

</html>
